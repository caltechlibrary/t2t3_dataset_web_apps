<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="R. S. Doiel, rsdoiel@caltech.edu" />
  <meta name="keywords" content="Dataset, HTML, CSS, JavaScript, Web
Components" />
  <title>A recipe for applications: Dataset &amp; Web Components</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">A recipe for applications: Dataset &amp; Web
Components</h1>
  <p class="author">
R. S. Doiel, <a href="mailto:rsdoiel@caltech.edu"
class="email">rsdoiel@caltech.edu</a>
  </p>
  <p class="institute">
<p>Caltech Library, Digital Library Development</p>
  </p>
  <p class="date">TBD</p>
</div>
<div class="slide" id="TOC">

</div>
<div id="welcome-to-a-recipe-for-applications"
class="slide section level1">
<h1>Welcome to “A recipe for applications”</h1>
<p>Welcome everyone. This is a talk and hands on workshop.</p>
<blockquote>
<p>An approach to building web applications using Dataset and Web
Components</p>
</blockquote>
</div>
<div id="workshop-dataset-web-components" class="slide section level1">
<h1>Workshop: Dataset &amp; Web Components</h1>
<h2 id="what-well-do">What we’ll do</h2>
<ul>
<li>We’ll build a web application for managing a list of recipes</li>
<li>Work with HTML, a little JavaScript, JSON and YAML</li>
</ul>
<h2 id="what-well-learn">What we’ll learn</h2>
<ul>
<li>How to create a JSON API using a YAML file and an embedded SQL
SELECT statement</li>
<li>How to enhance our HTML using Web Components from <a
href="https://github.com/caltechlibraryCL-web-components">CL Web
Components</a></li>
</ul>
<p>Follow along at <a
href="https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html"
class="uri">https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html</a></p>
<p>Download the presentation zip file at <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/releases"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/releases</a></p>
</div>
<div id="getting-started" class="slide section level1">
<h1>Getting started</h1>
<h3 id="you-probably-already-have-these-if-not-install-them">You
probably already have these, if not install them</h3>
<ul>
<li>A computer running macOS, Lunix, Raspberry Pi OS, Windows using
LSW</li>
<li>Terminal application</li>
<li><a href="https://vscodium.com/">Text Editor</a></li>
<li><a href="https://www.mozilla.org/en-US/firefox/new/">Web Browser</a>
(I’m assuming Firefox for this tutorial)</li>
</ul>
<h3 id="install-dataset">Install dataset</h3>
<ul>
<li><a href="https://github.com/caltechlibrary/dataset/releases"
class="uri">https://github.com/caltechlibrary/dataset/releases</a>, get
the latest v2 release</li>
<li>Windows 10/11, You need to use the Linux Subsystem for Windows (LSW)
<ul>
<li>Install Go 1.24.3 and compile Dataset from source code then install
under LWS</li>
<li><a
href="https://github.com/caltechlibrary/dataset/blob/main/INSTALL.md"
class="uri">https://github.com/caltechlibrary/dataset/blob/main/INSTALL.md</a></li>
</ul></li>
</ul>
<p>We can start our first iteration of our application once you have
these available.</p>
</div>
<div id="part-1-what-are-we-building" class="slide section level1">
<h1>Part 1: What are we building?</h1>
<p>GOAL: A simple web application that lets us curate a list of
recipes.</p>
<p>We’re going start from the backend and spend most of our time on the
front end.</p>
</div>
<div id="part-1.1-what-are-the-parts-of-our-application"
class="slide section level1">
<h1>Part 1.1: What are the parts of our application?</h1>
<ol style="list-style-type: decimal">
<li>A web service for managing the recipe collection</li>
<li>A page to browse recipes by name</li>
<li>A page to display a recipe</li>
<li>A page and web form to add or edit a recipe</li>
</ol>
</div>
<div id="part-1.1-what-is-a-recipe" class="slide section level1">
<h1>Part 1.1: What is a recipe?</h1>
<ul>
<li>A “key”, the unique identifier of a recipe (url friendly)</li>
<li>A name (human friendly and readable)</li>
<li>A list of ingredients and measures (CSV data)</li>
<li>A procedure describing the preparation process (text)</li>
</ul>
</div>
<div id="part-1.1-basic-strategy" class="slide section level1">
<h1>Part 1.1: Basic Strategy</h1>
<ol style="list-style-type: decimal">
<li>Setting up our web service</li>
<li>Sketch your app using HTML</li>
<li>Wire up and test</li>
</ol>
</div>
<div id="part-1.2-setting-up-our-web-service"
class="slide section level1">
<h1>Part 1.2: Setting up our web service</h1>
<ol style="list-style-type: decimal">
<li>create our <code>recipes.ds</code> collection</li>
<li>load sample data into our <code>recipes.ds</code> collection</li>
<li>Configure and run our collection as a web service</li>
</ol>
</div>
<div id="part-1.2-creating-our-collection" class="slide section level1">
<h1>Part 1.2: creating our collection</h1>
<p>We use the <code>dataset</code> command line program to initialize a
dataset collection.</p>
<pre class="shell"><code>dataset init recipes.ds</code></pre>
</div>
<div id="part-1.2-loading-some-sample-data"
class="slide section level1">
<h1>Part 1.2: Loading some sample data</h1>
<p>Download sample data file <a href="recipes.jsonl">recipes.jsonl</a>
(see: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/recipes.jsonl"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/recipes.jsonl</a>)</p>
<pre class="shell"><code>cat recipes.jsonl | dataset load recipes.ds</code></pre>
</div>
<div id="part-1.2-verify-we-loaded-our-data-ok"
class="slide section level1">
<h1>Part 1.2: Verify we loaded our data OK</h1>
<pre class="shell"><code>dataset keys recipes.ds
dataset read recipes.ds frybread</code></pre>
</div>
<div id="part-1.2-example-terminal-interaction"
class="slide section level1">
<h1>Part 1.2: Example terminal interaction</h1>
<pre class="shell"><code>$ dataset keys recipes.ds
blondies
brownies
cafe-con-leche
frybread
poi
waffles</code></pre>
</div>
<div id="part-1.2-example-terminal-interaction-1"
class="slide section level1">
<h1>Part 1.2: Example terminal interaction</h1>
<pre class="shell"><code>$ dataset read recipes.ds frybread
{
    &quot;ingredients&quot;: &quot;backing powder,2 tsp\r\nflour,2 cups\r\nhot water,2/3 cups\r\nsalt,1 tsp salt\r\nshortening,2 Tbsp\r\n&quot;,
    &quot;key&quot;: &quot;frybread&quot;,
    &quot;name&quot;: &quot;Fry Bread&quot;,
    &quot;procedure&quot;: &quot;1. Combine flour, baking powder, and salt in a bowl.\r\n2. Use a pastry blender (or two butter knives) to cut the shortening into the flour.\r\n3. Add the hot water, and mix until the water is incorporated and you get a dough.\r\n4. Turn out the dough on a lightly floured board. Knead the dough until it is soft and smooth.\r\n5. Wrap the dough in plastic, and let the dough rest for 30 minutes.\r\n6. Divide the dough into 6 pieces, roll each into a ball, and roll each into a flat disk with a rolling pin.\r\n7. Brush one side of each disk with melted margarine and place on a barbecue over a 3 Mississippi fire.\r\n8. Brush the opposing side of the bread with margarine and flip the bread on the barbecue.\r\n9. Cook until both sides are golden brown. Serve hot.\r\n\r\n- You can substitute either 1/4 cup plain yogurt, or a 1/4 cup soured milk as a leavening agent\r\ninstead of baking powder. If you do, add 2 hours to the rest time for the dough, and leave\r\nthe dough somewhere warm. You can optionally include the baking powder as well to get a\r\nvery puffy version of frybread. If using yogurt or soured milk for leavening, use 1\2 cup\r\ninstead of 1/3 cup water.\r\n- You can use mayonnaise in place of shortening for a crispy, crunchier texture.\r\n- You can also fry the dough in hot oil over a stovetop. The dough cooks rapidly and will brown\r\nin about 12 seconds and must be turned over to allow the opposite side to brown, then be removed\r\nfrom the oil and placed sideways into a colander or large bowl lined with paper towels to allow\r\nthe oil to drain off the finished product\r\n\r\nurl: https://en.wikibooks.org/wiki/Cookbook:Fry_Bread_I\r\n&quot;
}</code></pre>
</div>
<div id="part-1.2-create-the-static-content-directories"
class="slide section level1">
<h1>Part 1.2: create the static content directories</h1>
<pre class="shell"><code>mkdir htdocs
mkdir htdocs/modules
mkdir htdocs/css</code></pre>
</div>
<div id="part-1.2-setting-up-our-web-service-1"
class="slide section level1">
<h1>Part 1.2: Setting up our web service</h1>
<p><code>datasetd</code> provides a turn key web service defined by a
simple YAML file. It can host one or more dataset collections. It
provides a static file service as well as a JSON API for each
collection.</p>
<p>Create the file <a href="recipes_api.yaml">recipes_api.yaml</a> (see:
<a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/recipes_api.yaml"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/recipes_api.yaml</a>).</p>
</div>
<div id="part-1.2-recipes_api.yaml" class="slide section level1">
<h1>Part 1.2: recipes_api.yaml</h1>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">#!/usr/bin/env -S datasetd -debug</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes.ds</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="at">    </span><span class="fu">keys</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="at">    </span><span class="fu">create</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">    </span><span class="fu">read</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="at">    </span><span class="fu">update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">    </span><span class="fu">delete</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">    </span><span class="fu">query</span><span class="kw">:</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="fu">      list_recipes</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>        select src</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>        from recipes</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>        order by src-&gt;&gt;&#39;name&#39;</span></code></pre></div>
</div>
<div id="part-1.2-starting-and-stopping-the-web-service"
class="slide section level1">
<h1>Part 1.2: Starting and stopping the web service</h1>
<p>Starting the web service.</p>
<pre class="shell"><code>datasetd -debug recipes_api.yaml</code></pre>
<ul>
<li>Go do <a href="http://localhost:8001/api/version"
class="uri">http://localhost:8001/api/version</a></li>
<li>Look at the terminal window, do you see the log message for the
request?</li>
<li>You can shutdown the service by press control and C (Ctrl-C) in the
terminal session</li>
</ul>
</div>
<div id="part-1.2-starting-and-stopping-the-web-service-1"
class="slide section level1">
<h1>Part 1.2: Starting and stopping the web service</h1>
<ul>
<li>Tired to typing <code>datasetd -debug recipes_api.yaml</code>?</li>
<li>Make the YAML file executable!</li>
</ul>
<pre class="shell"><code>chmod 775 recipes_api.yaml</code></pre>
<p>Now you can shorten start up to</p>
<pre class="shell"><code>./recipes_api.yaml</code></pre>
</div>
<div id="part-1.3-what-about-our-static-content"
class="slide section level1">
<h1>Part 1.3: What about our static content?</h1>
<p>The web service is running but haven’t populated the htdocs
directory.</p>
<p>What do you see when you go to <a href="http://localhost:8001/"
class="uri">http://localhost:8001/</a>?</p>
</div>
<div id="part-1.3-what-should-our-recipe-metadata-look-like"
class="slide section level1">
<h1>Part 1.3: What should our recipe metadata look like?</h1>
<dl>
<dt>key</dt>
<dd>
A unique identifier for the recipe (needed by dataset to distinguish
objects).
</dd>
<dt>name</dt>
<dd>
A line of text. Held by an<code>input</code> element
</dd>
<dt>ingredients</dt>
<dd>
A CSV table. Held by a <code>textarea</code> or for display a
<code>table</code>.
</dd>
<dt>procedure</dt>
<dd>
Free text describing how to prepare the dish. Held by a
<code>textarea</code> element
</dd>
</dl>
<p>We’ll need a submit button to save a new or edited recipe.</p>
</div>
<div id="part-1.3-what-are-our-web-pages" class="slide section level1">
<h1>Part 1.3: What are our web pages?</h1>
<dl>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/index.html">htdocs/index.html</a></dt>
<dd>
Display a list of our recipes
</dd>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/display_recipe.html">htdocs/display_recipe.html</a></dt>
<dd>
A page that shows the recipe
</dd>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/edit_recipe.html">htdocs/edit_recipe.html</a></dt>
<dd>
A page used to add and edit recipes we’ve collected
</dd>
</dl>
</div>
<div id="part-1.3-populating-our-pages-using-javascript"
class="slide section level1">
<h1>Part 1.3: Populating our pages using JavaScript</h1>
<p>We’ll create four modules, one specific to each HTML page and one
utility module</p>
<dl>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/modules/list_recipes.js">htdocs/modules/list_recipes.js</a></dt>
<dd>
Display a list of our recipes
</dd>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/modules/display_recipe.js">htdocs/modules/display_recipe.js</a></dt>
<dd>
A page that shows the recipe
</dd>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/modules/edit_recipe.js">htdocs/modules/edit_recipe.js</a></dt>
<dd>
A page used to add and edit recipes we’ve collected
</dd>
<dt><a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs/modules/utils.js">htdocs/modules/utils.js</a></dt>
<dd>
This module handles retrieving data from the JSON API and finding the
object’s key
</dd>
</dl>
</div>
<div id="part-1.3-fire-up-our-web-service" class="slide section level1">
<h1>Part 1.3: Fire up our web service</h1>
<p>In a terminal run our startup command</p>
<pre class="shell"><code>datasetd -debug recipes_api.yaml</code></pre>
</div>
<div id="part-1.3-test-using-your-web-browser"
class="slide section level1">
<h1>Part 1.3: Test using your web browser</h1>
<ol style="list-style-type: decimal">
<li>Go to <a href="http://localhost:8001"
class="uri">http://localhost:8001</a></li>
<li>In your browser turn on your developer tools</li>
<li>Reload the page and explore using your developer tools</li>
<li>Click through the site</li>
</ol>
</div>
<div id="part-1.3-debugging-and-improving" class="slide section level1">
<h1>Part 1.3: Debugging and improving</h1>
<ol style="list-style-type: decimal">
<li>Are there issues to debug?</li>
<li>What happens when you add a recipe?</li>
<li>What happens when you hen you update a receipt?</li>
<li>Can any of this be improved?</li>
</ol>
</div>
<div id="intermission" class="slide section level1">
<h1>Intermission</h1>
<p>Let’s take a short break then we’ll comeback and iterate.</p>
<p>I’m available for questions.</p>
</div>
<div id="part-2-recipes-version-2" class="slide section level1">
<h1>Part 2: Recipes version 2</h1>
<p>What we are doing next</p>
<ul>
<li>Creating a new dataset collection called,
<code>recipes2.ds</code></li>
<li>Creating a new, <code>recipes_api2.yaml</code></li>
<li>Creating a new directory structure for our static content called,
<code>htdocs2</code></li>
</ul>
</div>
<div id="part-2.1-bootstrap-from-version-1"
class="slide section level1">
<h1>Part 2.1: Bootstrap from version 1</h1>
<pre class="shell"><code>dataset init recipes2.ds
cp recipes_api.yaml recipes_api2.yaml
cp -vR htdocs htdocs2</code></pre>
<p>(NOTE: The first line should look familiar, the others are just time
savers)</p>
</div>
<div id="part-2.1-updating-our-yaml-configuration"
class="slide section level1">
<h1>Part 2.1: Updating our YAML configuration</h1>
<ul>
<li>edit our <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/recipes_api2.yaml">recipes_api2.yaml</a></li>
<li>update the <code>htdocs</code> reference</li>
<li>update the port number in hosts to 8002</li>
<li>update the dataset to <code>recipes2.ds</code></li>
<li>What additional files need to change?
<ul>
<li>did we hard code the collection name in HTML?</li>
<li>did we hard code the collection name in JavaScript?</li>
</ul></li>
</ul>
</div>
<div id="part-2.1-testing-a-new-instance" class="slide section level1">
<h1>Part 2.1: Testing a new instance</h1>
<ul>
<li>Test our new instance
<ul>
<li>What is broken?</li>
<li>Did we catch all the places with hard coded collection names?</li>
<li>What about behaviors?</li>
</ul></li>
<li>Shutdown down and restart datasetd to debug YAML changes</li>
</ul>
<pre class="shell"><code>dataset recipes_api2.yaml</code></pre>
</div>
<div id="part-2.2-desirable-changes" class="slide section level1">
<h1>Part 2.2: Desirable changes</h1>
<ul>
<li>Handle form submission sends us to a useless URL, how do we fix
that?</li>
<li>Typing in comma seperated values is cumbersum, can me improve
that?</li>
</ul>
</div>
<div id="part-2.2-fixing-web-form-submission"
class="slide section level1">
<h1>Part 2.2: Fixing web form submission</h1>
<ul>
<li>The <code>utils.js</code> module includes a <code>saveRecipe</code>
function</li>
<li>We need an event listener to trigger it
<ul>
<li>Which element?</li>
<li>What event?</li>
</ul></li>
</ul>
</div>
<div id="part-2.2-update-the-html-for-edit_recipe.html"
class="slide section level1">
<h1>Part 2.2: Update the HTML for edit_recipe.html</h1>
<p>Add the following at the bottom of the page before the
<code>&lt;/body&gt;</code>.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;module&quot;</span><span class="dt">&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="im">import</span> { saveRecipe } <span class="im">from</span> <span class="st">&#39;./modules/utils.js&#39;</span><span class="op">;</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="kw">const</span> form <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;submit&#39;</span><span class="op">,</span> saveRecipe)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
</div>
<div id="part-2.2-restart-datasetd-and-test"
class="slide section level1">
<h1>Part 2.2: Restart datasetd and test</h1>
<pre class="shell"><code>datasetd -debug recipes_api2.yaml</code></pre>
<p>Test using your web browser.</p>
</div>
<div id="part-2.3-improving-the-ui-with-web-components"
class="slide section level1">
<h1>Part 2.3: Improving the UI with Web Components</h1>
<ol style="list-style-type: decimal">
<li>Extend the HTML elements available</li>
<li>Implement components as JavaScript Modules</li>
</ol>
</div>
<div id="part-2.3-cl-web-components" class="slide section level1">
<h1>Part 2.3: CL-web-components</h1>
<ul>
<li>CL-web-components, a collection of web components designed for
Caltech Library</li>
<li>Use your web browser retrieve the latest release</li>
</ul>
<p><a
href="https://github.com/caltechlibrary/CL-web-components/releases"
class="uri">https://github.com/caltechlibrary/CL-web-components/releases</a></p>
</div>
<div id="part-2.3-copy-the-web-components-to-the-modules-directory"
class="slide section level1">
<h1>Part 2.3: Copy the web components to the modules directory</h1>
<ul>
<li>Unzip just the JavaScript files</li>
<li>Move the JavaScript files in the zip file to
<code>htdocs2/modules/</code>.</li>
</ul>
<pre class="shell"><code>unzip $HOME/Downloads/cl-web-components-0.0.6.zip *.js
mv -v *.js htdocs2/models/</code></pre>
</div>
<div id="part-2.2-adding-csvtextarea-to-edit_recipe.html"
class="slide section level1">
<h1>Part 2.2: Adding CSVTextarea to edit_recipe.html</h1>
<ul>
<li>edit <code>htdocs2/edit_recipe.html</code>
<ul>
<li>Include the CSVTextarea JavaScript module in the document head</li>
<li>Wrapping the “ingredients” textarea with
<code>&lt;csv-textarea&gt;</code></li>
</ul></li>
</ul>
<p>See: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs2/edit_recipe.html"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/blob/main/htdocs2/edit_recipe.html</a></p>
</div>
<div id="part-2.2-what-are-the-attributes-needed-in-a-csv-textarea"
class="slide section level1">
<h1>Part 2.2: What are the attributes needed in a
<code>&lt;csv-textarea&gt;</code>?</h1>
<ul>
<li>copy the attributes form the “ingredients” textarea to the
<code>&lt;csv-textarea&gt;</code></li>
<li>Add an these attributes to <code>&lt;csv-textarea&gt;</code>
<ul>
<li><code>column-headings="Ingredients,Units"</code></li>
<li><code>debug="true"</code></li>
</ul></li>
</ul>
</div>
<div id="part-2.2-restart-recipes_api2.yaml-and-test"
class="slide section level1">
<h1>Part 2.2: Restart recipes_api2.yaml and test</h1>
<p>Start up our web service</p>
<pre><code>dataset recipes_api2.yaml</code></pre>
<ol style="list-style-type: decimal">
<li>Point your browser at <a
href="http://localhost:8002/edit_recipe.html"
class="uri">http://localhost:8002/edit_recipe.html</a></li>
<li>Turn on your developer tools</li>
<li>Test the web component, what’s the problem you see?</li>
</ol>
</div>
<div id="part-2.2-getting-the-table-populated-update-utils.js"
class="slide section level1">
<h1>Part 2.2: Getting the table populated, update
<code>utils.js</code></h1>
<p>CSVTextarea has the ability to be updated from CSV text. Let’s do
that.</p>
<p>In <code>edit_recipe.js</code> you need to find this.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">if</span> (data[<span class="st">&quot;ingredients&quot;</span>] <span class="op">!==</span> <span class="kw">undefined</span>) {</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  ingredientsTextarea<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> data[<span class="st">&quot;ingredients&quot;</span>]<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>}</span></code></pre></div>
<p>And replace it with something like this.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="cf">if</span> (data[<span class="st">&quot;ingredients&quot;</span>] <span class="op">!==</span> <span class="kw">undefined</span>) {</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  ingredientsTextarea<span class="op">.</span><span class="fu">fromCSV</span>(data[<span class="st">&#39;ingredients&#39;</span>])<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="part-2.2-test-and-debug" class="slide section level1">
<h1>Part 2.2: Test and debug</h1>
<ul>
<li>Do you find other problems?</li>
</ul>
</div>
<div id="part-3-exploring-further" class="slide section level1">
<h1>Part 3: Exploring further</h1>
<ul>
<li>The server side can be turn key using a JavaScript web page
<ul>
<li>When is it a good idea?</li>
<li>When is be an bad idea?</li>
</ul></li>
<li>Moving from a single layer stack to a two or three layer stack
<ul>
<li>Dataset behind a front end web server</li>
<li>Dataset behind middle ware</li>
</ul></li>
<li>Is this approach sustainable?</li>
</ul>
</div>
<div id="part-3-exploring-human-interfaces"
class="slide section level1">
<h1>Part 3: Exploring Human Interfaces</h1>
<ul>
<li>Why bother with Web Components?
<ul>
<li>What’s missing?</li>
</ul></li>
<li>What are the assumptions in this approach?
<ul>
<li>Are they valid?</li>
</ul></li>
</ul>
</div>
<div id="part-3-exploring-human-interfaces-1"
class="slide section level1">
<h1>Part 3: Exploring Human Interfaces</h1>
<ul>
<li>The traditional division of responsibilities in the browser is
<ul>
<li>HTML for structured data markup</li>
<li>CSS for visual design and layout</li>
<li>JavaScript to orchestrate behaviors</li>
</ul></li>
<li>Does Web components contradict that the division of
responsibilities?</li>
<li>Is progressive enhancement is still relevant in 2025?
<ul>
<li>Is it OK to require JavaScript in a web page?</li>
</ul></li>
</ul>
</div>
<div id="part-3-my-recomendations" class="slide section level1">
<h1>Part 3: My Recomendations</h1>
<ul>
<li>Build with the grain of the web
<ul>
<li>Building blocks are HTML, CSS, JavaScript and HTTP protocol</li>
</ul></li>
<li>Take advantage of localhost</li>
<li>Production, build in layers
<ul>
<li>access control with front end web service (Apache+Shibboleth,
NginX+Shibboleth)</li>
<li>data validation with middle ware (localhost: Go, TypeScript or
Python)</li>
<li>object storage with Dataset (localhost)</li>
</ul></li>
</ul>
</div>
<div id="part-3-what-i-am-still-mulling-over"
class="slide section level1">
<h1>Part 3: What I am still mulling over?</h1>
<ul>
<li>Dataset can shrink the stack but does not remove the need for
middleware (yet)</li>
<li>Web Components offer the possibility of consistent interfaces across
sites
<ul>
<li>They can help with accessibility</li>
</ul></li>
<li>I think Web Components ultimately simplify things
<ul>
<li>Trade off: individual compontents can be complex</li>
</ul></li>
<li>REST services force us to middleware or Browser JavaScript
<ul>
<li>Is it reasonable to require JavaScript (or WASM)?</li>
<li>Is there a simpler abstraction?</li>
</ul></li>
</ul>
</div>
<div id="reference-dataset" class="slide section level1">
<h1>Reference: Dataset</h1>
<ul>
<li><a href="https://caltechlibrary.github.io/dataset">Dataset
Project</a></li>
<li><a href="https://github.com/caltechlibrary/dataset">Dataset
Repostitory</a></li>
<li><a href="https://github.com/caltechlibrary/dataset/issues">Getting
help with Dataset</a></li>
</ul>
</div>
<div id="reference-cl-web-components" class="slide section level1">
<h1>Reference: CL-web-components</h1>
<dl>
<dt><a
href="https://github.com/caltechlibrary/CL-web-components/blob/main/csvtextarea.js">CSVTextarea</a></dt>
<dd>
Wraps a textarea element and presents a editable table of cells
</dd>
<dt><a
href="https://github.com/caltechlibrary/CL-web-components/blob/main/a_to_z_ul.js">AToZUL</a></dt>
<dd>
Wraps a UL list and creates an A to Z list
</dd>
<dt><a
href="https://github.com/caltechlibrary/CL-web-components/blob/main/sortable_table.js">SortableTable</a></dt>
<dd>
Wraps an HTML table making it sort-able and filterable on a column
</dd>
</dl>
<ul>
<li>Getting help with CL-web-components, <a
href="https://github.com/caltechlibrary/CL-web-components/issues"
class="uri">https://github.com/caltechlibrary/CL-web-components/issues</a>.</li>
</ul>
</div>
<div id="reference-programming-languages" class="slide section level1">
<h1>Reference: Programming Languages</h1>
<ul>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Structuring_content">HTML5</a>,
structured content</li>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Styling_basics">CSS</a>,
layout and style</li>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Scripting">JavaScript</a>,
behaviors and web components</li>
<li><a href="https://sqlite.org">SQL and SQLite</a>
<ul>
<li><a href="https://www.sqlitetutorial.net/">SQLite Tutorial</a></li>
</ul></li>
<li><a href="https://developer.mozilla.org/en-US">MDN</a></li>
</ul>
</div>
<div id="reference-data-formats" class="slide section level1">
<h1>Reference: Data formats</h1>
<ul>
<li><a href="https://www.json.org">JSON</a></li>
<li><a href="https://jsonlines.org">JSON Lines</a></li>
<li><a href="https://yaml.org/">YAML</a></li>
</ul>
</div>
<div id="thank-you-for-listening" class="slide section level1">
<h1>Thank you for listening</h1>
<ul>
<li>View presentation: <a
href="https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html"
class="uri">https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html</a></li>
<li>View the repository: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps</a></li>
<li>Comment on this spresentation: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/issues"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/issues</a></li>
<li>Author: R. S. Doiel, <a href="mailto:rsdoiel@caltech.edu"
class="uri">mailto:rsdoiel@caltech.edu</a></li>
</ul>
</div>
</body>
</html>
