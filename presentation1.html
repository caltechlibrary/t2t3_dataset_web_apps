<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="R. S. Doiel, rsdoiel@caltech.edu" />
  <meta name="date" content="2025-06-12" />
  <meta name="keywords" content="Dataset, HTML, JavaScript, Web
Components" />
  <title>A recipe for applications: Dataset &amp; Web Components</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">A recipe for applications: Dataset &amp; Web
Components</h1>
  <p class="author">
R. S. Doiel, <a href="mailto:rsdoiel@caltech.edu"
class="email">rsdoiel@caltech.edu</a>
  </p>
  <p class="institute">
<p>Caltech Library, Digital Library Development</p>
  </p>
  <p class="date">2025-06-12</p>
</div>
<div class="slide" id="TOC">

</div>
<div id="welcome-to-a-recipe-for-applications"
class="slide section level1">
<h1>Welcome to “A recipe for applications”</h1>
<p>Welcome everyone. This is a hands on workshop (part 1).</p>
<blockquote>
<p>An approach to building web applications using Dataset</p>
</blockquote>
</div>
<div id="workshop-dataset-html" class="slide section level1">
<h1>Workshop: Dataset &amp; HTML</h1>
<h2 id="what-well-do">What we’ll do</h2>
<ul>
<li>We’ll build a web application for managing a list of recipes</li>
<li>Work with HTML, a little JavaScript, JSON and YAML</li>
</ul>
<h2 id="what-well-learn">What we’ll learn</h2>
<ul>
<li>How to create a JSON API using a YAML file and an embedded SQL
SELECT statement</li>
<li>How to use HTML and a little JavaScript browser to turn the API into
an application</li>
</ul>
<p>Follow along at <a
href="https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html"
class="uri">https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html</a></p>
<p>Download the presentation zip file at <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/releases"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/releases</a></p>
</div>
<div id="getting-started" class="slide section level1">
<h1>Getting started</h1>
<h3 id="you-probably-already-have-these-if-not-install-them">You
probably already have these, if not install them</h3>
<ul>
<li>A computer running macOS, Linux, Raspberry Pi OS, Windows</li>
<li>Terminal application</li>
<li><a href="https://vscodium.com/">Text Editor</a></li>
<li><a href="https://www.mozilla.org/en-US/firefox/new/">Web Browser</a>
(I’m assuming Firefox for this tutorial)</li>
<li><a href="https://curl.se/">cURL</a> (macOS/Linux) or <a
href="https://learn.microsoft.com/en-us/powershell/module/?term=irm">irm</a>
(Windows)</li>
</ul>
<h3 id="install-dataset">Install dataset</h3>
<ul>
<li>See <a href="https://caltechlibrary.github.io/dataset/INSTALL.html"
class="uri">https://caltechlibrary.github.io/dataset/INSTALL.html</a>
<ul>
<li>If you have problems you can download the zip files from here <a
href="https://github.com/caltechlibrary/dataset/releases"
class="uri">https://github.com/caltechlibrary/dataset/releases</a></li>
</ul></li>
<li>You need to be running the latest v2 release (&gt;= 2.3.0)</li>
</ul>
<p>We can start our first iteration of our application once you have
these available.</p>
</div>
<div id="wait-what-is-dataset" class="slide section level1">
<h1>Wait, what is Dataset?</h1>
<h2 id="short-answer">Short answer</h2>
<ul>
<li>A collection of tools for curating JSON objects as collections</li>
</ul>
</div>
<div id="wait-what-is-dataset-1" class="slide section level1">
<h1>Wait, what is Dataset?</h1>
<h2 id="long-answer">Long answer</h2>
<ul>
<li>A way of managing collections of JSON documents
<ul>
<li>A JSON document expresses an object, e.g. a metadata record</li>
</ul></li>
<li>Dataset manages objects using key object pairs</li>
<li>The JSON objects can be queried using SQL</li>
<li>Collections are flexible (schema-less)</li>
</ul>
</div>
<div id="part-1-what-are-we-building" class="slide section level1">
<h1>Part 1: What are we building?</h1>
<p>GOAL: A simple web application that lets us curate a list of
recipes.</p>
<ul>
<li>Start with the web service (back end)</li>
<li>Finish with the browser (front end, browser side)</li>
</ul>
</div>
<div id="part-1.1-what-are-the-parts-of-our-application"
class="slide section level1">
<h1>Part 1.1: What are the parts of our application?</h1>
<ol style="list-style-type: decimal">
<li>A web service for managing the recipe collection</li>
<li>A page to browse recipes by name</li>
<li>A page to display a recipe</li>
<li>A page with a web form to add or edit a recipe</li>
</ol>
</div>
<div id="part-1.1-what-is-a-recipe-its-data-structure"
class="slide section level1">
<h1>Part 1.1: What is a recipe? (it’s data structure)</h1>
<ul>
<li>A “key”, the unique identifier of a recipe (url friendly)</li>
<li>A name (human friendly and readable)</li>
<li>A list of ingredients and their quantities (CSV data)</li>
<li>A procedure describing the preparation process (text)</li>
</ul>
</div>
<div id="part-1.1-basic-strategy" class="slide section level1">
<h1>Part 1.1: Basic Strategy</h1>
<ol style="list-style-type: decimal">
<li>Setting up a collection</li>
<li>Setting up our web service</li>
<li>Sketch our app using HTML</li>
<li>Wire up and test</li>
</ol>
</div>
<div id="part-1.2-setting-up-our-collection"
class="slide section level1">
<h1>Part 1.2: Setting up our collection</h1>
<ol style="list-style-type: decimal">
<li>create our <code>recipes.ds</code> collection</li>
<li>load sample data into our <code>recipes.ds</code> collection</li>
<li>Configure and run our collection web service</li>
</ol>
</div>
<div id="part-1.2-creating-our-collection" class="slide section level1">
<h1>Part 1.2: creating our collection</h1>
<p>We use the <code>dataset</code> command line program to initialize a
dataset collection.</p>
<pre class="shell"><code>dataset init recipes.ds</code></pre>
<p>(Linux, macOS and Windows)</p>
</div>
<div id="part-1.2-sample-data-its-nice-to-have"
class="slide section level1">
<h1>Part 1.2: Sample Data, it’s nice to have</h1>
<ul>
<li>When prototyping applications it’s nice to have data to work
with</li>
<li>I’ve created some for our recipe application</li>
<li>Dataset supports ingesting collections using JSON line
documents</li>
</ul>
</div>
<div id="part-1.2-what-is-json-lines" class="slide section level1">
<h1>Part 1.2: What is JSON Lines?</h1>
<ul>
<li>Sometimes called JSON-L, JSONL, file extension
<code>.jsonl</code></li>
<li>One JSON object per line, see <a href="https://jsonlines.org/"
class="uri">https://jsonlines.org/</a></li>
<li>A portable way to express object collections
<ul>
<li>supported by dataset’s dump and load actions</li>
</ul></li>
</ul>
</div>
<div id="part-1.2-loading-some-sample-data"
class="slide section level1">
<h1>Part 1.2: Loading some sample data</h1>
<p>Download sample data file <a
href="recipes.jsonl">recipes.jsonl</a></p>
<pre class="shell"><code>curl -o recipes.jsonl \
  https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/recipes.jsonl
cat recipes.jsonl | dataset load recipes.ds</code></pre>
<p>On Windows:</p>
<pre class="pwsh"><code>irm -OutFile recipes.jsonl `
  https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/recipes.jsonl
Get-Content recipes.jsonl | dataset load recipes.ds</code></pre>
</div>
<div id="part-1.2-verify-we-loaded-our-data-ok"
class="slide section level1">
<h1>Part 1.2: Verify we loaded our data OK</h1>
<pre class="shell"><code>dataset keys recipes.ds
dataset read recipes.ds frybread</code></pre>
</div>
<div id="part-1.2-example-terminal-interaction"
class="slide section level1">
<h1>Part 1.2: Example terminal interaction</h1>
<pre class="shell"><code>$ dataset keys recipes.ds
blondies
brownies
cafe-con-leche
frybread
poi
waffles</code></pre>
</div>
<div id="part-1.2-example-terminal-interaction-1"
class="slide section level1">
<h1>Part 1.2: Example terminal interaction</h1>
<pre class="shell"><code>$ dataset read recipes.ds frybread
{
    &quot;ingredients&quot;: &quot;backing powder,2 tsp\r\nflour,2 cups\r\nhot water,2/3 cups\r\nsalt,1 tsp salt\r\nshortening,2 Tbsp\r\n&quot;,
    &quot;key&quot;: &quot;frybread&quot;,
    &quot;name&quot;: &quot;Fry Bread&quot;,
    &quot;procedure&quot;: &quot;1. Combine flour, baking powder, and salt in a bowl.\r\n2. Use a pastry blender (or two butter knives) to cut the shortening into the flour.\r\n3. Add the hot water, and mix until the water is incorporated and you get a dough.\r\n4. Turn out the dough on a lightly floured board. Knead the dough until it is soft and smooth.\r\n5. Wrap the dough in plastic, and let the dough rest for 30 minutes.\r\n6. Divide the dough into 6 pieces, roll each into a ball, and roll each into a flat disk with a rolling pin.\r\n7. Brush one side of each disk with melted margarine and place on a barbecue over a 3 Mississippi fire.\r\n8. Brush the opposing side of the bread with margarine and flip the bread on the barbecue.\r\n9. Cook until both sides are golden brown. Serve hot.\r\n\r\n- You can substitute either 1/4 cup plain yogurt, or a 1/4 cup soured milk as a leavening agent\r\ninstead of baking powder. If you do, add 2 hours to the rest time for the dough, and leave\r\nthe dough somewhere warm. You can optionally include the baking powder as well to get a\r\nvery puffy version of frybread. If using yogurt or soured milk for leavening, use 1\2 cup\r\ninstead of 1/3 cup water.\r\n- You can use mayonnaise in place of shortening for a crispy, crunchier texture.\r\n- You can also fry the dough in hot oil over a stove top. The dough cooks rapidly and will brown\r\nin about 12 seconds and must be turned over to allow the opposite side to brown, then be removed\r\nfrom the oil and placed sideways into a colander or large bowl lined with paper towels to allow\r\nthe oil to drain off the finished product\r\n\r\nurl: https://en.wikibooks.org/wiki/Cookbook:Fry_Bread_I\r\n&quot;
}</code></pre>
</div>
<div id="part-1.2-setting-up-our-web-service"
class="slide section level1">
<h1>Part 1.2: Setting up our web service</h1>
<ol style="list-style-type: decimal">
<li>Create our static content directories</li>
<li>Define our web service using a YAML file</li>
</ol>
</div>
<div id="part-1.2-create-the-static-content-directories"
class="slide section level1">
<h1>Part 1.2: create the static content directories</h1>
<pre class="shell"><code>mkdir htdocs
mkdir htdocs/css
mkdir htdocs/modules</code></pre>
</div>
<div id="part-1.2-dataset-stores-our-objects-how-does-that-help"
class="slide section level1">
<h1>Part 1.2: Dataset stores our objects, how does that help?</h1>
<ul>
<li>The Dataset project provides a web service called
<code>datasetd</code></li>
<li>This web service provides a <a
href="https://en.wikipedia.org/wiki/REST">REST</a> JSON API for one or
more dataset collections</li>
<li>Dataset web service can provide static content hosting</li>
<li>These two features implement a “back end” for a web application</li>
</ul>
</div>
<div id="part-1.2-setting-up-our-web-service-1"
class="slide section level1">
<h1>Part 1.2: Setting up our web service</h1>
<p><code>datasetd</code> web service is defined by a simple YAML file.
It has three top level attributes</p>
<ul>
<li>host (required)</li>
<li>htdocs (optional)</li>
<li>collections (optional)</li>
</ul>
<p>NOTE: Dataset web service can host many collections at the same
time.</p>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>YAML is a superset of JSON that is easy to read and easy to type.</p>
<ol style="list-style-type: decimal">
<li>Create a file, using your text editor called <a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/recipes_api1.yaml">recipes_api.yaml</a></li>
<li>Type in <code>host: localhost:8001</code></li>
</ol>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span></code></pre></div>
<p>This line tells dataset web service that it should listen on port
8001 on localhost. Dataset web services always run on localhost.</p>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file-1"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>Since we are going to build a web application we need to tell the
Dataset web service where to find our static content. This is done using
the <code>htdocs</code> attribute. Relative paths are assumed to start
at the same directory level as our YAML file. Add our htdocs line based
on the directory structure we created earlier.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span></code></pre></div>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file-2"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>The next element, <code>collections</code> lets us define a list of
one or more dataset collections that are available from our web service.
For our project we define just one. Our collection is called,
<code>recipes.ds</code>.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes</span></span></code></pre></div>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file-3"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>We now have a minimal configuration. But right now it is not useful.
For each collection we need to define the access (at the collection
level) needed by our web application. The access is modeled on the core
actions available in the dataset command line tool.</p>
<ul>
<li>keys (allow retrieval of keys)</li>
<li>create (allow objects to be added to a collection)</li>
<li>update (allow objects in a collection to be updated)</li>
<li>delete (allow objects to be deleted)</li>
</ul>
<p>If an permission is not included it is defaults to false. The value
true will enabled it.</p>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file-4"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>Here’s what the permissions look like for our web application.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="at">    </span><span class="fu">keys</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="at">    </span><span class="fu">create</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="at">    </span><span class="fu">update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="at">    </span><span class="fu">delete</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
</div>
<div id="part-1.2-we-need-to-create-our-yaml-configuration-file-5"
class="slide section level1">
<h1>Part 1.2: We need to create our YAML configuration file</h1>
<p>SQL is a powerful language. Dataset only allows defined queries to be
run. One simple query is needed for our application,
<code>index_recipes</code>.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="at">    </span><span class="fu">keys</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="at">    </span><span class="fu">create</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="at">    </span><span class="fu">update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="at">    </span><span class="fu">delete</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="at">    </span><span class="fu">query</span><span class="kw">:</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="fu">       list_recipes</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>        select src</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>        from recipes</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>        order by src-&gt;&gt;&#39;name&#39;</span></code></pre></div>
</div>
<div id="part-1.2-rest-and-the-browser" class="slide section level1">
<h1>Part 1.2: REST and the browser</h1>
<ul>
<li>The dataset web service is a REST JSON API</li>
<li>Browsers do not support REST in HTML (only GET and POST)</li>
</ul>
</div>
<div id="part-1.2-rest-and-the-browser-1" class="slide section level1">
<h1>Part 1.2: REST and the browser</h1>
<ul>
<li>Dataset web service overloads POST to subsume PUT actions of
REST</li>
<li>Dataset web service supports success and error redirects for
POST</li>
</ul>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="at">    </span><span class="fu">keys</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="at">    </span><span class="fu">create</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">    # Create redirectos do double duty as a POST also supports update.</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="at">    </span><span class="fu">create_success</span><span class="kw">:</span><span class="at"> http://localhost:8001/display_recipe.html</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="at">    </span><span class="fu">create_error</span><span class="kw">:</span><span class="at"> http://localhost:8001/edit_recipe.html</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="at">    </span><span class="fu">update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="at">    </span><span class="fu">delete</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="at">    </span><span class="fu">query</span><span class="kw">:</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="fu">      list_recipes</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>        select src</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>        from recipes</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>        order by src-&gt;&gt;&#39;name&#39;</span></code></pre></div>
</div>
<div id="part-1.2-recipes_api.yaml" class="slide section level1">
<h1>Part 1.2: recipes_api.yaml</h1>
<p>YAML allows comments, here’s an example.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">#!/usr/bin/env -S datasetd -debug</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># Host and port to listen on</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost:8001</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># location of our static content</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="fu">htdocs</span><span class="kw">:</span><span class="at"> htdocs</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co"># Define the collections supported in our application</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">  # Define the permissions and behavior of the API For our recipe collection</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> recipes.ds</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="at">    </span><span class="fu">keys</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="at">    </span><span class="fu">create</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">    # When we successfully create or update via a form using a POST method</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">    # display the updated object</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="at">    </span><span class="fu">create_success</span><span class="kw">:</span><span class="at"> http://localhost:8001/display_recipe.html</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">    # When we fail go back to the current page.</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="at">    </span><span class="fu">create_error</span><span class="kw">:</span><span class="at"> http://localhost:8001/edit_recipe.html</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="at">    </span><span class="fu">read</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="at">    </span><span class="fu">update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="at">    </span><span class="fu">delete</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="at">    </span><span class="fu">query</span><span class="kw">:</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="fu">      list_recipes</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>        select src</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>        from recipes</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>        order by src-&gt;&gt;&#39;name&#39;</span></code></pre></div>
</div>
<div id="part-1.2-recipes_api.yaml-1" class="slide section level1">
<h1>Part 1.2: recipes_api.yaml</h1>
<p>On macOS and Linux you can cURL the <code>recipes_api.yaml</code>
using the following statement.</p>
<pre class="shell"><code>curl -o recipes_api.yaml \
   https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/recipes_api1.yaml</code></pre>
<p>On Windows</p>
<pre class="pwsh"><code>irm -OutFile recipes_api.yaml `
   https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/recipes_api1.yaml</code></pre>
</div>
<div id="part-1.2-starting-and-stopping-the-web-service"
class="slide section level1">
<h1>Part 1.2: Starting and stopping the web service</h1>
<p>Starting the web service.</p>
<pre class="shell"><code>datasetd -debug recipes_api.yaml</code></pre>
<ul>
<li>Go do <a href="http://localhost:8001/api/version"
class="uri">http://localhost:8001/api/version</a></li>
<li>Look at the terminal window, do you see the log message for the
request?</li>
<li>You can shutdown the service by press control and C (Ctrl-C) in the
terminal session</li>
</ul>
</div>
<div id="part-1.2-starting-and-stopping-the-web-service-1"
class="slide section level1">
<h1>Part 1.2: Starting and stopping the web service</h1>
<ul>
<li>Tired to typing
“<code>datasetd -debug recipes_api.yaml</code>”?</li>
<li>Make the YAML file executable!</li>
</ul>
<p>(on macOS, Linux or Window’s WSL)</p>
<pre class="shell"><code>chmod 775 recipes_api.yaml</code></pre>
<p>Now you can shorten start up to</p>
<pre class="shell"><code>./recipes_api.yaml</code></pre>
</div>
<div id="part-1.3-what-about-our-static-content"
class="slide section level1">
<h1>Part 1.3: What about our static content?</h1>
<p>The web service is running but the htdocs directory is not
populated.</p>
<p>What do you see when you go to <a href="http://localhost:8001/"
class="uri">http://localhost:8001/</a>?</p>
<p>We can complete our application by building the front end with HTML,
CSS and JavaScript.</p>
</div>
<div id="part-1.3-what-should-our-recipe-metadata-look-like"
class="slide section level1">
<h1>Part 1.3: What should our recipe metadata look like?</h1>
<dl>
<dt>key</dt>
<dd>
A unique identifier for the recipe (needed by dataset to distinguish
objects).
</dd>
<dt>name</dt>
<dd>
A line of text. Held by an <code>input</code> element
</dd>
<dt>ingredients</dt>
<dd>
A CSV table. Held by a <code>textarea</code> or for display a
<code>table</code>.
</dd>
<dt>procedure</dt>
<dd>
Free text describing how to prepare the dish. Held by a
<code>textarea</code> element
</dd>
</dl>
<p>We’ll need a submit button to save a new or edited recipe.</p>
</div>
<div id="part-1.3-what-are-our-web-pages" class="slide section level1">
<h1>Part 1.3: What are our web pages?</h1>
<dl>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/htdocs1/index.html"
title="you may retrieve the contents via curl or irm">htdocs/index.html</a></dt>
<dd>
Display a list of our recipes
</dd>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main//htdocs1/display_recipe.html"
title="you may retrieve the contents via curl or irm">htdocs/display_recipe.html</a></dt>
<dd>
A page that shows the recipe
</dd>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main//htdocs1/edit_recipe.html"
title="you may retrieve the contents via curl or irm">htdocs/edit_recipe.html</a></dt>
<dd>
A page used to add and edit recipes we’ve collected
</dd>
</dl>
</div>
<div id="part-1.3-populating-our-pages-using-javascript"
class="slide section level1">
<h1>Part 1.3: Populating our pages using JavaScript</h1>
<p>We’ll create four modules, one specific to each HTML page and one
utility module</p>
<dl>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/htdocs1/modules/index_recipes.js"
title="you may retrieve the contents via curl or irm">htdocs/modules/index_recipes.js</a></dt>
<dd>
Display a list of our recipes
</dd>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main//htdocs1/modules/display_recipe.js"
title="you may retrieve the contents via curl or irm">htdocs/modules/display_recipe.js</a></dt>
<dd>
A page that shows the recipe
</dd>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main//htdocs1/modules/edit_recipe.js"
title="you may retrieve the contents via curl or irm">htdocs/modules/edit_recipe.js</a></dt>
<dd>
A page used to add and edit recipes we’ve collected
</dd>
<dt><a
href="https://raw.githubusercontent.com/caltechlibrary/t2t3_dataset_web_apps/refs/heads/main/htdocs1/modules/utils.js"
title="you may retrieve the contents via curl or irm">htdocs/modules/utils.js</a></dt>
<dd>
This module handles retrieving data from the JSON API and finding the
object’s key
</dd>
</dl>
</div>
<div id="part-1.3-fire-up-our-web-service" class="slide section level1">
<h1>Part 1.3: Fire up our web service</h1>
<p>In a terminal run our startup command</p>
<pre class="shell"><code>datasetd -debug recipes_api.yaml</code></pre>
</div>
<div id="part-1.3-test-using-your-web-browser"
class="slide section level1">
<h1>Part 1.3: Test using your web browser</h1>
<ol style="list-style-type: decimal">
<li>Go to <a href="http://localhost:8001"
class="uri">http://localhost:8001</a></li>
<li>In your browser turn on your developer tools</li>
<li>Reload the page</li>
<li>Explore while your developer tools are turned on</li>
</ol>
</div>
<div id="part-1.3-debugging-and-improving" class="slide section level1">
<h1>Part 1.3: Debugging and improving</h1>
<ol style="list-style-type: decimal">
<li>Are there issues to debug?</li>
<li>What happens when you add a recipe?</li>
<li>What happens when you when you update a receipt?</li>
<li>Can any of this be improved?</li>
</ol>
</div>
<div id="part-1.3-what-weve-learned-in-part-1"
class="slide section level1">
<h1>Part 1.3: What we’ve learned in Part 1</h1>
<blockquote>
<p>Thank you for participating</p>
</blockquote>
<ul>
<li>The back end can be “turn key” only requiring a simple YAML
file</li>
<li>Basic HTML is enough to prototype a minimal web application
<ul>
<li>A little JavaScript, browser side turns an API into a working
prototype</li>
</ul></li>
<li>Our prototype is only a starting point</li>
</ul>
<p>Improve the user experience with in Part 2 of the workshop, <a
href="presentation2.html">Dataset &amp; Web Components</a></p>
</div>
<div id="reference-dataset" class="slide section level1">
<h1>Reference: Dataset</h1>
<ul>
<li><a href="https://caltechlibrary.github.io/dataset">Dataset
Project</a></li>
<li><a href="https://github.com/caltechlibrary/dataset">Dataset
Repository</a></li>
<li><a href="https://github.com/caltechlibrary/dataset/issues">Getting
help with Dataset</a></li>
</ul>
</div>
<div id="reference-programming-languages" class="slide section level1">
<h1>Reference: Programming Languages</h1>
<ul>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Structuring_content">HTML5</a>,
structured content</li>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Styling_basics">CSS</a>,
layout and style</li>
<li><a
href="https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Scripting">JavaScript</a>,
behaviors and web components</li>
<li><a href="https://sqlite.org">SQL and SQLite</a>
<ul>
<li><a href="https://www.sqlitetutorial.net/">SQLite Tutorial</a></li>
<li>Or typing into your favorite LLM, but be prepared to validate the
recommendations</li>
</ul></li>
<li><a href="https://developer.mozilla.org/en-US">MDN</a></li>
</ul>
</div>
<div id="reference-data-formats" class="slide section level1">
<h1>Reference: Data formats</h1>
<ul>
<li><a href="https://www.json.org">JSON</a></li>
<li><a href="https://jsonlines.org">JSON Lines</a></li>
<li><a href="https://yaml.org/">YAML</a></li>
</ul>
</div>
<div id="thank-you-for-participating" class="slide section level1">
<h1>Thank you for participating</h1>
<ul>
<li>View presentations:
<ul>
<li><a
href="https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html"
class="uri">https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation1.html</a></li>
<li><a
href="https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation2.html"
class="uri">https://caltechlibrary.github.io/t2t3_dataset_web_apps/presentation2.html</a></li>
</ul></li>
<li>View the repository: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps</a></li>
<li>Comment on this presentation: <a
href="https://github.com/caltechlibrary/t2t3_dataset_web_apps/issues"
class="uri">https://github.com/caltechlibrary/t2t3_dataset_web_apps/issues</a></li>
<li>Author: R. S. Doiel, <a href="mailto:rsdoiel@caltech.edu"
class="uri">mailto:rsdoiel@caltech.edu</a></li>
</ul>
</div>
</body>
</html>
